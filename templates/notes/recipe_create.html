{% extends 'base.html' %} {% load static %} {% block title %}
<title>Create Recipe</title>
{% endblock %} {% block content %}

<div class=" flex flex-col items-center ">
	<h1 class="">Create Recipe</h1>

	<form method="post" class=" ">
		{% csrf_token %}

		<div class="">
			<!-- <label for="id_name" class="block text-base font-medium text-gray-800 mb-1">Recipe name</label> -->
			<input
				id="id_name"
				name="name"
				type="text"
				placeholder=" Recipe Name"
				class="bg-white focus:outline-none focus:ring-2 focus:ring-purple/40 focus:border-purple"
			/>
		</div>

		Description (smaller label)
		<div>
			<label
				for="id_description"
				class="block text-sm font-medium text-gray-700 mb-1"
				>Description</label
			>
			<textarea
				id="id_description"
				name="description"
				rows="4"
				class="w-full rounded-lg border border-warmgray bg-white px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple/40 focus:border-purple"
			></textarea>
		</div>

		<!-- Targets: OG / FG (boxed) -->
		<div class="bg-offwhite p-6 rounded-lg shadow-md">
			<h2 class="text-xl font-semibold text-hop mb-4">Targets</h2>
			<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
				<div>
					<label
						for="id_target_og"
						class="block text-base font-medium text-gray-800 mb-1"
						>Target OG</label
					>
					<input
						id="id_target_og"
						name="target_og"
						type="text"
						class="w-full rounded-lg border border-warmgray bg-white px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple/40 focus:border-purple"
					/>
				</div>
				<div>
					<label
						for="id_target_fg"
						class="block text-base font-medium text-gray-800 mb-1"
						>Target FG</label
					>
					<input
						id="id_target_fg"
						name="target_fg"
						type="text"
						class="w-full rounded-lg border border-warmgray bg-white px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple/40 focus:border-purple"
					/>
				</div>
			</div>
		</div>

		<!-- Fermentation (boxed; inline on md+) -->
		<div class="bg-offwhite p-6 rounded-lg shadow-md">
			<h2 class="text-xl font-semibold text-hop mb-4">Fermentation</h2>
			<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
				<div>
					<label
						for="id_start_fermentation"
						class="block text-base font-medium text-gray-800 mb-1"
						>Start fermentation</label
					>
					<input
						id="id_start_fermentation"
						name="start_fermentation"
						type="date"
						class="w-full rounded-lg border border-warmgray bg-white px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple/40 focus:border-purple"
					/>
				</div>
				<div>
					<label
						for="id_end_fermentation"
						class="block text-base font-medium text-gray-800 mb-1"
						>End fermentation</label
					>
					<input
						id="id_end_fermentation"
						name="end_fermentation"
						type="date"
						class="w-full rounded-lg border border-warmgray bg-white px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple/40 focus:border-purple"
					/>
				</div>
			</div>
		</div>

		<!-- Cold crash (boxed; inline on md+) -->
		<div class="bg-offwhite p-6 rounded-lg shadow-md">
			<h2 class="text-xl font-semibold text-hop mb-4">Cold crash</h2>
			<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
				<div>
					<label
						for="id_start_coldcrash"
						class="block text-base font-medium text-gray-800 mb-1"
						>Start cold crash</label
					>
					<input
						id="id_start_coldcrash"
						name="start_coldcrash"
						type="date"
						class="w-full rounded-lg border border-warmgray bg-white px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple/40 focus:border-purple"
					/>
				</div>
				<div>
					<label
						for="id_end_coldcrash"
						class="block text-base font-medium text-gray-800 mb-1"
						>End cold crash</label
					>
					<input
						id="id_end_coldcrash"
						name="end_coldcrash"
						type="date"
						class="w-full rounded-lg border border-warmgray bg-white px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple/40 focus:border-purple"
					/>
				</div>
			</div>
		</div>

		<!-- Conditioning (boxed; inline on md+) -->
		<div class="bg-offwhite p-6 rounded-lg shadow-md">
			<h2 class="text-xl font-semibold text-hop mb-4">Conditioning</h2>
			<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
				<div>
					<label
						for="id_start_conditioning"
						class="block text-base font-medium text-gray-800 mb-1"
						>Start conditioning</label
					>
					<input
						id="id_start_conditioning"
						name="start_conditioning"
						type="date"
						class="w-full rounded-lg border border-warmgray bg-white px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple/40 focus:border-purple"
					/>
				</div>
				<div>
					<label
						for="id_end_conditioning"
						class="block text-base font-medium text-gray-800 mb-1"
						>End conditioning</label
					>
					<input
						id="id_end_conditioning"
						name="end_conditioning"
						type="date"
						class="w-full rounded-lg border border-warmgray bg-white px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple/40 focus:border-purple"
					/>
				</div>
			</div>
		</div>

		<!-- Brewing notes (boxed, smaller label) -->
		<div class="bg-offwhite p-6 rounded-lg shadow-md">
			<label
				for="id_brewing_notes"
				class="block text-sm font-medium text-gray-700 mb-2"
				>Brewing notes</label
			>
			<textarea
				id="id_brewing_notes"
				name="brewing_notes"
				rows="4"
				class="w-full rounded-lg border border-warmgray bg-white px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple/40 focus:border-purple"
			></textarea>
		</div>

		<!-- Testing notes (boxed, smaller label) -->
		<div class="bg-offwhite p-6 rounded-lg shadow-md">
			<label
				for="id_testing_notes"
				class="block text-sm font-medium text-gray-700 mb-2"
				>Testing notes</label
			>
			<textarea
				id="id_testing_notes"
				name="testing_notes"
				rows="4"
				class="w-full rounded-lg border border-warmgray bg-white px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple/40 focus:border-purple"
			></textarea>
		</div>

		<!-- Verdict: 1–5 stars -->
		<div>
			<span class="block text-base font-medium text-gray-800 mb-2"
				>Verdict</span
			>
			<div class="rating" role="radiogroup" aria-label="Verdict (1 to 5 stars)">
				<input type="radio" id="star5" name="verdict" value="5" /><label
					for="star5"
					title="5 stars"
					>★</label
				>
				<input type="radio" id="star4" name="verdict" value="4" /><label
					for="star4"
					title="4 stars"
					>★</label
				>
				<input type="radio" id="star3" name="verdict" value="3" /><label
					for="star3"
					title="3 stars"
					>★</label
				>
				<input type="radio" id="star2" name="verdict" value="2" /><label
					for="star2"
					title="2 stars"
					>★</label
				>
				<input type="radio" id="star1" name="verdict" value="1" /><label
					for="star1"
					title="1 star"
					>★</label
				>
			</div>
		</div>

		<!-- Actions -->
		<div class="flex justify-end gap-3">
			<a
				href="/"
				class="border border-hop text-hop bg-transparent hover:bg-hop/10 active:bg-hop/20 rounded-lg px-4 py-2"
			>
				Cancel
			</a>
			<button
				type="submit"
				class="bg-malt text-gray-900 hover:bg-malt/90 active:bg-malt/80 rounded-lg px-4 py-2"
			>
				Save Recipe
			</button>
		</div>
	</form>
</div>

<!-- minimal CSS just for star behavior -->
<style>
	.rating {
		display: inline-flex;
		flex-direction: row-reverse;
		gap: 0.25rem;
	}
	.rating > input {
		display: none;
	}
	.rating > label {
		font-size: 1.75rem;
		line-height: 1;
		color: #d3cec4;
		cursor: pointer;
	}
	.rating > input:checked ~ label {
		color: #d4a017;
	}
	.rating > label:hover,
	.rating > label:hover ~ label {
		color: #d4a017;
	}
</style>

<script>
	document.addEventListener('DOMContentLoaded', function () {
		const formsetArea = document.getElementById('formset-area');
		const addButton = document.getElementById('add-ingredient');
		const totalForms = document.querySelector(
			'#id_' + '{{ formset.prefix }}' + '-TOTAL_FORMS'
		);

		addButton.addEventListener('click', function () {
			const formCount = parseInt(totalForms.value);
			const emptyFormHtml = `{{ formset.empty_form.as_p|escapejs }}`.replace(
				/__prefix__/g,
				formCount
			);
			const newDiv = document.createElement('div');
			newDiv.classList.add('ingredient-form');
			newDiv.innerHTML = emptyFormHtml;
			formsetArea.appendChild(newDiv);
			totalForms.value = formCount + 1;
		});
	});
</script>
{% endblock %}
